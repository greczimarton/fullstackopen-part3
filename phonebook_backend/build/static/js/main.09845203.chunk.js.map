{"version":3,"sources":["services/Person.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","person","window","confirm","name","delete","Filter","filterName","handleNameChange","value","onChange","AddForm","addNewNameToPersons","newName","newNumber","HandleNumberChange","onSubmit","type","Numbers","persons","handleDelete","length","map","filter","t","toLowerCase","includes","Person","number","onClick","Notification","message","error","ErrorNotification","style","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","marginTop","AddNotification","App","useState","setPersons","setNewName","setNewNumber","setNewFilterName","setMessage","setError","useEffect","console","log","personService","newFilterName","event","target","preventDefault","newPerson","some","concat","setTimeout","catch","find","changedPerson","returnedPerson","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.09845203.chunk.js","sourcesContent":["import axios from \"axios\"\r\nconst baseUrl = '/api/people'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl,newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`,newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst deletePerson = (person) => {\r\n    window.confirm(`Delete ${person.name}?`)\r\n    const request = axios\r\n        .delete(`${baseUrl}/${person.id}`)\r\n\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default {getAll,create,update,deletePerson}","import React, {useState, useEffect} from 'react'\nimport personService from './services/Person'\n\nconst Filter = ({filterName, handleNameChange}) => {\n    return (\n        <div>\n            Filter by name: <input value={filterName} onChange={handleNameChange}/>\n        </div>\n    )\n}\n\nconst AddForm = ({addNewNameToPersons,newName ,newNumber, handleNameChange, HandleNumberChange}) => {\n    return (\n        <form onSubmit={addNewNameToPersons}>\n            <div>\n                Name: <input value={newName} onChange={handleNameChange}/>\n            </div>\n            <div>\n                Number: <input value={newNumber} onChange={HandleNumberChange}/>\n            </div>\n            <div>\n                <button type=\"submit\">Add</button>\n            </div>\n        </form>\n    )\n}\n\nconst Numbers = ({persons, filterName,handleDelete}) => {\n    if (filterName.length === 0){\n        return (\n            <div>\n                {persons.map(person =>\n                    <li key={person.id}>\n                        <Person person={person} handleDelete={handleDelete}/>\n                        <hr/>\n                    </li>\n                )}\n            </div>\n        )\n    }\n    else{\n        return (\n            <div>\n                {persons.filter(t => t.name.toLowerCase().includes(filterName)).map(person =>\n                    <li key={person.id}>\n                        <Person person={person} handleDelete={handleDelete}/>\n                        <hr/>\n                    </li>)}\n            </div>\n        )\n    }\n}\n\nconst Person = ({person, handleDelete}) => {\n    return (\n        <div>\n            <p>{person.name}: {person.number}</p>\n            <button onClick={() => handleDelete(person)}>Delete</button>\n        </div>\n    )\n}\n\nconst Notification = ({message,error}) => {\n    if (message === null){\n        return null\n    }\n    if (error) {\n        return (\n            <ErrorNotification message={message}/>\n        )\n\n    }\n    else{\n        return (\n            <AddNotification message={message}/>\n        )\n    }\n}\n\nconst ErrorNotification = ({message}) => {\n    const errorStyle = {\n        color: 'red',\n        background: 'lightgrey',\n        fontSize: '20px',\n        borderStyle: 'solid',\n        borderRadius: '5px',\n        padding: '10px',\n        marginBottom: '10px',\n        marginTop: '10px'\n    }\n    return (\n        <div style={errorStyle}>\n            {message}\n        </div>\n    )\n}\n\nconst AddNotification = ({message}) => {\n    const errorStyle = {\n        color: 'green',\n        background: 'lightgrey',\n        fontSize: '20px',\n        borderStyle: 'solid',\n        borderRadius: '5px',\n        padding: '10px',\n        marginBottom: '10px',\n        marginTop: '10px'\n\n    }\n    return (\n        <div style={errorStyle}>\n            {message}\n        </div>\n    )\n}\n\nconst App = () => {\n    const [persons, setPersons] = useState([])\n    const [newName, setNewName] = useState('')\n    const [newNumber, setNewNumber] = useState('')\n    const [filterName, setNewFilterName] = useState('')\n    const [message, setMessage] = useState(null)\n    const [error, setError] = useState(false)\n\n    useEffect(() => {\n        console.log(\"effect\")\n        personService\n            .getAll()\n            .then(response => {\n                console.log(\"promise fulfilled\")\n                setPersons(response)\n            })\n    },[])\n\n    console.log(\"person fetched: \",persons.length)\n\n\n    const handleNameChange = (event) => {\n        setNewName(event.target.value)\n    }\n\n    const HandleNumberChange = (event) => {\n        setNewNumber(event.target.value)\n    }\n\n    const HandleFilterNameChange = (event) => {\n        setNewFilterName(event.target.value)\n    }\n\n\n    const addNewNameToPersons = (event) => {\n        event.preventDefault()\n\n        const newPerson =\n            {\n                name: newName,\n                number: newNumber\n            }\n        if (persons.some(t => t.name === newName) === false) {\n            personService\n                .create(newPerson)\n                .then(response => {\n                    setPersons(persons.concat(response))\n                    setNewName('')\n                    setNewNumber('')\n                    setMessage(`Added ${response.name} with number ${response.number}`)\n                    setError(false)\n                    setTimeout(() => {\n                        setMessage(null)\n                    },5000)\n                })\n                .catch(error => {\n                    console.log(error.response.data.error)\n                    setError(true)\n                    setMessage(error.response.data.error)\n                    setTimeout(() => {\n                        setMessage(null)\n                    }, 15000)\n                })\n        }\n        else {\n            window.confirm(`${newName} is already added to phonebook. Replace the old number with the new one?`)\n            const person = persons.find(t => t.name === newName)\n            const changedPerson = {...person, number: newNumber}\n            personService\n                .update(person.id,changedPerson)\n                .then(returnedPerson => {\n                    setPersons(persons.map(person => person.id !== changedPerson.id ? person : returnedPerson))\n                    setNewName('')\n                    setNewNumber('')\n                    setError(false)\n                    setMessage(`${person.name}'s number has been updated. New number: ${returnedPerson.number}!`)\n                    setTimeout(() => {\n                        setMessage(null)\n                    },15000)\n                })\n                .catch(error => {\n                    console.log(error.response.data.error)\n                    setError(true)\n                    setMessage(error.response.data.error)\n                    //setPersons(persons.filter(t => t.id !== changedPerson.id))\n                    setTimeout(() => {\n                        setMessage(null)\n                    }, 15000)\n                })\n        }\n    }\n\n    const handleDelete = (person) => {\n        personService\n            .deletePerson(person)\n            .then(() => {\n                setPersons(persons.filter(t => t.id !== person.id))\n            })\n            .catch(error => {\n                    setError(true)\n                    setMessage(`The person '${person.name}' was already deleted from the server.`)\n                    setTimeout(() => {\n                        setMessage(null)\n                    }, 2500)\n                }\n            )\n    }\n\n\n    return (\n        <div>\n            <h2>Phonebook</h2>\n            <Filter newFilterName={filterName} handleNameChange={HandleFilterNameChange}/>\n            <Notification message={message} error={error}/>\n            <h3>Add new</h3>\n            <AddForm newName={newName} handleNameChange={handleNameChange} newNumber={newNumber} HandleNumberChange={HandleNumberChange} addNewNameToPersons={addNewNameToPersons} />\n            <h2>Numbers</h2>\n            <Numbers persons={persons} filterName={filterName} handleDelete={handleDelete}/>\n        </div>\n    );\n}\n\nexport default App;\n","import ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n    <App />,\n    document.getElementById('root')\n);\n"],"sourceRoot":""}